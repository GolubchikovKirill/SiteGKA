global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - /etc/prometheus/rules/infrascope-alerts.yml
  - /etc/prometheus/rules/generated-service-alerts.yml

scrape_configs:
  - job_name: prometheus
    static_configs:
      - targets: ["prometheus:9090"]

  - job_name: infrascope-backend
    metrics_path: /metrics
    static_configs:
      - targets: ["backend:8000"]

  - job_name: infrascope-worker
    metrics_path: /
    static_configs:
      - targets: ["worker:9108"]

  - job_name: infrascope-ml-service
    metrics_path: /metrics
    static_configs:
      - targets: ["ml-service:8010"]

  - job_name: infrascope-polling-service
    metrics_path: /metrics
    static_configs:
      - targets: ["polling-service:8011"]

  - job_name: infrascope-discovery-service
    metrics_path: /metrics
    static_configs:
      - targets: ["discovery-service:8012"]

  - job_name: infrascope-network-control-service
    metrics_path: /metrics
    static_configs:
      - targets: ["network-control-service:8013"]

  - job_name: infrascope-service-catalog
    file_sd_configs:
      - files: ["/etc/prometheus/rules/service-targets.json"]
